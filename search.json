[{"title":"Brotato + DLC é›£åº¦ 5 å»ºè­°(å…¨è§’è‰²) + æ–°æ§‹å»º(ä¸­ç¿»)","url":"/2024/11/26/brotato/","content":"<p><img src=\"/images/bratato.jpg\" alt=\"brotato.jpg\"><br>\n<a href=\"https://steamcommunity.com/sharedfiles/filedetails/?id=3018964960\">æ–‡ç« åŸæ–‡</a></p>\n<h2 id=\"æ¦‚è¿°\">æ¦‚è¿°</h2>\n<p>åœ¨æœ¬æ–‡ä¸­æˆ‘æœƒæä¾›æˆ‘æ¯ä¸€å€‹è§’è‰²åœ¨é€²è¡Œé›£åº¦ 5 éŠæˆ²çš„å»ºè­°èˆ‡æ§‹å»º<br>\nåœ–ç‰‡å¯èƒ½æœƒæ€ªæ€ªçš„ï¼Œå› ç‚ºæˆ‘ç”¨ Steam Deck ç©</p>\n<h2 id=\"ä¸€èˆ¬å»ºè­°\">ä¸€èˆ¬å»ºè­°</h2>\n<p>ä¸è¦å°çœ‹<code>é‹æ°£(Luck)</code>èˆ‡<code>æ”¶ç©«(Harvesting)</code><br>\nä½ è¶Šæ—©æ‹¿åˆ°é‹æ°£è·Ÿæ”¶ç©«ï¼Œå¾Œé¢çš„å›å ±è¶Šå¤š<br>\nä¸‹é¢æ˜¯å€‹ä¾‹å­<br>\n<img src=\"/images/harvestExample.jpg\" alt=\"harvestExample.jpg\"><br>\né€™ä¸¦éæ„å‘³è‘—æ¯æ¬¡éƒ½å¿…é ˆé¸æ“‡<code>æ”¶ç©«(Harvesting)</code>ä½†è¶Šæ—©æå‡æ”¶ç›Šè¶Šå¤§<br>\n<code>é‹æ°£(Luck)</code>ä¹Ÿæ˜¯åŒç†ï¼Œè¶Šæ—©æå‡å¯ä»¥æœ‰æ›´å¥½çš„å•†åº—é¸æ“‡èˆ‡å‡ç´šé¸é …<br>\næ‰€ä»¥å¦‚æœä½ åœ¨é›£åº¦ 5 ä¸‹æŸäº›è§’è‰²ç©å¾—å¾ˆåƒåŠ›ï¼Œå¯ä»¥å˜—è©¦åœ¨å‰æœŸæå‡<code>æ”¶ç©«(Harvesting)</code>å’Œ<code>é‹æ°£(Luck)</code><br>\næˆ–è¨±æœƒè®“ä½ ç©èµ·ä¾†è¼ƒèˆ’æœ<br>\nä¸‹åœ–èªªæ˜<code>é‹æ°£(Luck)</code>å¦‚ä½•å½±éŸ¿éŠæˆ²<br>\n<img src=\"/images/luck.png\" alt=\"lucky.png\"><br>\nç„¶å¾Œä¸‹åœ–èªªæ˜<code>é‹æ°£(Luck)</code>æ•¸å€¼å°å•†åº—çš„å½±éŸ¿ï¼Œä½†ä¸è¦å¿˜è¨˜å‡ç´šç•°å½¢ç´ ææ‰è½<br>\n<img src=\"/images/luckShop.jpg\" alt=\"luckShop.jpg\"><br>\nä¸€èˆ¬è€Œè¨€ï¼Œä½ ä¸éœ€è¦å¤ªå¤šå°±å¯ä»¥å®Œæˆé›£åº¦ 5ï¼Œåªéœ€è¦äº†è§£è§’è‰²è·Ÿç‰©å“çš„è¯å‹•</p>\n<h2 id=\"æ¶ˆè€—å“ã€æ²»ç™‚èˆ‡å¯¶ç®±-é‡è¦\">æ¶ˆè€—å“ã€æ²»ç™‚èˆ‡å¯¶ç®±(é‡è¦!!!)</h2>\n<p>ğŸ˜±<code>é™¤ééœ€è¦è£œè¡€ï¼Œè«‹ä¸è¦æ‹¾å–æ¶ˆè€—å“è·Ÿå¯¶ç®±</code>ğŸ˜±<br>\nå› ç‚ºå¦‚æœä½ æ»¿è¡€æ‹¾å–ï¼Œå°‡ä¸æœƒç²å¾—ä»»ä½•æ•ˆç›Š<br>\næ¶ˆè€—å“è·Ÿå¯¶ç®±åœ¨æ³¢æ•¸çµæŸçš„æ™‚å€™æœƒè‡ªå‹•æ‹¾å–<br>\n<img src=\"/images/healPick.jpg\" alt=\"healPick.jpg\"><br>\n<img src=\"/images/lootCrate.jpg\" alt=\"lootCrate.jpg\"><br>\né€™å€‹æŠ€å·§é©åˆç”¨æ–¼ä½ æƒ³è¦ç§’æ®ºèè‹±æ€ªï¼Œå› ç‚ºä»–æœƒæ‰è½ä¸€å€‹å‚³å¥‡å¯¶ç®±å¯ä»¥å›å¾© 100HP<br>\nå¦‚æœä½ æ»¿è¡€å°±ä¿ç•™åˆ°éœ€è¦çš„æ™‚å€™å†ç”¨<br>\né€™æ˜¯ä¸€å€‹å¾ˆæœ‰ç”¨çš„ç­–ç•¥ï¼Œä½†å¸¸å¸¸è¢«å¿½ç•¥<br>\næ‰€ä»¥æ»¿è¡€çš„æ™‚å€™ï¼Œå°±ä¸è¦æ’¿æ¶ˆè€—å“è·Ÿå¯¶ç®±</p>\n<p>é™¤éä½ çš„æ“ä½œå¾ˆç¥ï¼Œè¦ä¸ç„¶ä½ ä¸€å®šæœƒéœ€è¦è£œè¡€ï¼Œä»–æœƒåœ¨é—œéµæ™‚åˆ»æ•‘ä½ ä¸€å‘½ ğŸ¤¡<br>\n<img src=\"/images/healBuff.jpg\" alt=\"healBuff.jpg\"></p>\n<h2 id=\"é›£åº¦-5-æ¨è–¦ç‰©å“-I-got-you\">é›£åº¦ 5 æ¨è–¦ç‰©å“!!!(I got you)</h2>\n<p>æœ‰äº›ç‰©å“å¯ä»¥æ¥µå¤§çš„å¹«åŠ©ä½ é€šéé›£åº¦ 5<br>\né¦–é¸æ˜¯å¦–ç²¾(Fairy)å¹¾ä¹å¿…é¸ï¼Œå…¶é¤˜çš„å¯ä»¥åƒè€ƒä¸‹åœ–<br>\nå»ºè­°åœ¨è¼ƒä½çš„é›£åº¦è§£é–é€™äº›è£å‚™ï¼Œé€™æ¨£ä½ å°±å¯ä»¥åœ¨é›£åº¦ 5 ä½¿ç”¨å®ƒ<br>\n<img src=\"/images/betterItem.jpg\" alt=\"betterItem.jpg\"></p>\n<h2 id=\"S-Tier-Items\">S-Tier Items</h2>\n<p>ç‚ºä»€éº¼è¦ç›¡é‡å–å¾—é€™äº›è£å‚™???</p>\n<ul>\n<li>è®“ä½ éŠæˆ²æ›´é †åˆ©</li>\n<li>å·¨å¤§åƒ¹å€¼ï¼Œä¸”å¹¾ä¹å›æœ¬</li>\n<li>å‚·å®³è¶Šé«˜ï¼Œä½ æ®ºæ•µçš„é€Ÿåº¦å°±è¶Šå¿«ï¼Œæ®ºçš„æ•µäººè¶Šå¤šï¼Œä½ ç²å¾—çš„ææ–™ä¹Ÿå°±è¶Šå¤šã€‚</li>\n<li>è¶Šæ—©ç²å¾—åœ–ç‰‡ä¸­ S ç´šè£å‚™è£¡é‚£äº›æä¾›æ”¶ç©«ï¼ˆHarvestingï¼‰çš„è£å‚™ï¼Œå®ƒå€‘å›æœ¬çš„é€Ÿåº¦å°±è¶Šå¿«ã€‚</li>\n</ul>\n<p><strong>æ³¨æ„!!!</strong><br>\nç‚ºä»€éº¼é‚£äº›å¯ä»¥<code>å¢åŠ æ•µäººæ•¸é‡</code>çš„è£å‚™æ˜¯å¥½æ±è¥¿??<br>\nå› ç‚ºæ¯å›åˆåˆ·æ–°çš„æ•µäººè¶Šå¤šï¼Œæ•´å ´éŠæˆ²ä¸­ç²å¾—çš„ææ–™ä¹Ÿæœƒè¶Šå¤šã€‚å› æ­¤ï¼Œè¨˜å¾—ç•™æ„é€™é¡è£å‚™ã€‚</p>\n<p>ä½†ä¹Ÿè¦ç•™å¿ƒï¼Œæœ‰äº›è£å‚™åœ¨ç¬¬ 15 æ³¢ä¹‹å¾Œå°±ä¸å¤ªå€¼å¾—æ‹¿äº†ï¼Œå…·é«”å–æ±ºæ–¼ä½ ç²å¾—å®ƒå€‘çš„æ™‚é–“ã€‚<br>\nä»¥ä¸‹åˆ—å‡ºçš„è£å‚™å¹¾ä¹é©ç”¨æ–¼éŠæˆ²ä¸­æ¯å€‹è§’è‰²ï¼Œæ‰€ä»¥å®ƒå€‘è¢«æ­¸å…¥äº† S ç´šã€‚<br>\n<img src=\"/images/SRankItems.jpg\" alt=\"SRankItems.jpg\"></p>\n<p><strong>ç‰¹åˆ¥</strong><br>\nç‚ºä»€éº¼é¸æ“‡ Ugly Tooth??<br>\nå¦‚æœä½ è¦ºå¾—ä½ å¸¸å¸¸è¢«èè‹±æ€ªæˆ– BOSS è²¼è‘—æ‰“æˆ–æ˜¯è¦ºå¾—ç§»å‹•é€Ÿåº¦ä¸å¤ èº²æ€ªé‚£å°±é¸å®ƒ<br>\nå®ƒæ˜¯éŠæˆ²ä¸­å½±éŸ¿åŠ›æœ€å¤§çš„è£å‚™ä¹‹ä¸€ï¼Œç‰¹åˆ¥æ˜¯åœ¨ä½ çš„è·‘åœ–ç‹€æ³ä¸ç©©çš„æ™‚å€™ï¼Œèƒ½èµ·åˆ°å¾ˆå¤§çš„ä½œç”¨<br>\nå¦‚æœä½ ç›®å‰å¯ä»¥è¼•é¬†æ¸…å ´ï¼Œé‚£å°±ä¸éœ€è¦å®ƒ<br>\n<img src=\"/images/uglyTooth.jpg\" alt=\"uglyTooth.jpg\"></p>\n<h2 id=\"F-Tier-Items-å¹¾ä¹ä¸é¸\">F-Tier Items(å¹¾ä¹ä¸é¸)</h2>\n<p>ç‚ºç”šéº¼è¦ç›¡é‡é¿å…é¸æ“‡é€™äº›ç‰©å“</p>\n<h2 id=\"åƒè€ƒè³‡æ–™\">åƒè€ƒè³‡æ–™</h2>\n<ul>\n<li><a href=\"https://steamcommunity.com/sharedfiles/filedetails/?id=3018964960\">https://steamcommunity.com/sharedfiles/filedetails/?id=3018964960</a></li>\n<li><a href=\"https://brotato.wiki.spellsandguns.com/Brotato_Wiki\">https://brotato.wiki.spellsandguns.com/Brotato_Wiki</a></li>\n</ul>\n","categories":["éŠæˆ²"],"tags":["éŠæˆ²"]},{"title":"C# ä½¿ç”¨ curl.exe å‘¼å«api","url":"/2024/11/19/curl/","content":"<h2 id=\"æ¦‚è¿°\">æ¦‚è¿°</h2>\n<p>æœ‰æ™‚å€™é–‹ç™¼è»Ÿé«”çš„ç‰ˆæœ¬éèˆŠï¼Œå°è‡´ä»‹æ¥ API æœƒç•°å¸¸å›°é›£<br>\nå­¸é•·èªªå¯ä»¥ç”¨ curl ä¾†å‘¼å« apiï¼Œæ‰€ä»¥å°±ä¾†çœ‹çœ‹æ€éº¼ç”¨</p>\n<h2 id=\"DownLoad-curl-exe\">DownLoad curl.exe</h2>\n<p><a href=\"https://curl.se/download.html#Win64\">https://curl.se/download.html#Win64</a></p>\n<h2 id=\"CurlHelper-cs\">CurlHelper.cs</h2>\n<pre><code class=\"highlight C#\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">CurlHelper</span>\n    &#123;\n        <span class=\"comment\">// curl.exe è·¯å¾‘</span>\n        <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">readonly</span> <span class=\"built_in\">string</span> CurlPath = <span class=\"string\">$&quot;C:\\\\AP06BZ\\\\EXE\\\\CURL.EXE&quot;</span>;\n\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> Get è«‹æ±‚</span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;param name=&quot;url&quot;&gt;</span><span class=\"doctag\">&lt;/param&gt;</span></span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;param name=&quot;headers&quot;&gt;</span><span class=\"doctag\">&lt;/param&gt;</span></span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;returns&gt;</span><span class=\"doctag\">&lt;/returns&gt;</span></span>\n        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"built_in\">string</span> <span class=\"title\">GetRequest</span>(<span class=\"params\"><span class=\"built_in\">string</span> url, Dictionary&lt;<span class=\"built_in\">string</span>, <span class=\"built_in\">string</span>&gt; headers = <span class=\"literal\">null</span></span>)</span>\n        &#123;\n            <span class=\"built_in\">string</span> arugments = <span class=\"string\">$&quot;-X GET \\&quot;<span class=\"subst\">&#123;url&#125;</span>\\&quot;&quot;</span>;\n            <span class=\"keyword\">if</span> (headers != <span class=\"literal\">null</span>)\n            &#123;\n                <span class=\"keyword\">foreach</span> (<span class=\"keyword\">var</span> header <span class=\"keyword\">in</span> headers)\n                &#123;\n                    arugments += <span class=\"string\">$&quot; -H \\&quot;<span class=\"subst\">&#123;header.Key&#125;</span>: <span class=\"subst\">&#123;header.Value&#125;</span>\\&quot;&quot;</span>;\n                &#125;\n            &#125;\n            <span class=\"keyword\">return</span> ExecuteCurlCommand(arugments);\n        &#125;\n\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> POST è«‹æ±‚(JSONè³‡æ–™)</span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;param name=&quot;url&quot;&gt;</span><span class=\"doctag\">&lt;/param&gt;</span></span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;param name=&quot;jsonData&quot;&gt;</span><span class=\"doctag\">&lt;/param&gt;</span></span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;param name=&quot;headers&quot;&gt;</span><span class=\"doctag\">&lt;/param&gt;</span></span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;returns&gt;</span><span class=\"doctag\">&lt;/returns&gt;</span></span>\n        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"built_in\">string</span> <span class=\"title\">PostRequest</span>(<span class=\"params\"><span class=\"built_in\">string</span> url, <span class=\"built_in\">string</span> jsonData, Dictionary&lt;<span class=\"built_in\">string</span>, <span class=\"built_in\">string</span>&gt; headers = <span class=\"literal\">null</span></span>)</span>\n        &#123;\n            <span class=\"built_in\">string</span> arguments = <span class=\"string\">$&quot;-X POST -H \\&quot;Content-Type: application/json\\&quot; -d \\&quot;<span class=\"subst\">&#123;jsonData&#125;</span>\\&quot; \\&quot;<span class=\"subst\">&#123;url&#125;</span>\\&quot;&quot;</span>;\n            <span class=\"keyword\">if</span> (headers != <span class=\"literal\">null</span>)\n            &#123;\n                <span class=\"keyword\">foreach</span> (<span class=\"keyword\">var</span> header <span class=\"keyword\">in</span> headers)\n                &#123;\n                    arguments += <span class=\"string\">$&quot; -H \\&quot;<span class=\"subst\">&#123;header.Key&#125;</span>: <span class=\"subst\">&#123;header.Value&#125;</span>\\&quot;&quot;</span>;\n                &#125;\n            &#125;\n            <span class=\"keyword\">return</span> ExecuteCurlCommand(arguments);\n        &#125;\n\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> POST è«‹æ±‚(è¡¨å–®è³‡æ–™)</span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;param name=&quot;url&quot;&gt;</span><span class=\"doctag\">&lt;/param&gt;</span></span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;param name=&quot;formData&quot;&gt;</span><span class=\"doctag\">&lt;/param&gt;</span></span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;param name=&quot;headers&quot;&gt;</span><span class=\"doctag\">&lt;/param&gt;</span></span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;returns&gt;</span><span class=\"doctag\">&lt;/returns&gt;</span></span>\n        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"built_in\">string</span> <span class=\"title\">PostFormRequest</span>(<span class=\"params\"><span class=\"built_in\">string</span> url, Dictionary&lt;<span class=\"built_in\">string</span>, <span class=\"built_in\">string</span>&gt; formData, Dictionary&lt;<span class=\"built_in\">string</span>, <span class=\"built_in\">string</span>&gt; headers = <span class=\"literal\">null</span></span>)</span>\n        &#123;\n            <span class=\"built_in\">string</span> arguments = <span class=\"string\">&quot;-X POST&quot;</span>;\n            <span class=\"keyword\">foreach</span> (<span class=\"keyword\">var</span> item <span class=\"keyword\">in</span> formData)\n            &#123;\n                arguments += <span class=\"string\">$&quot; -F \\&quot;<span class=\"subst\">&#123;item.Key&#125;</span>=<span class=\"subst\">&#123;item.Value&#125;</span>\\&quot;&quot;</span>;\n            &#125;\n            arguments += <span class=\"string\">$&quot; \\&quot;<span class=\"subst\">&#123;url&#125;</span>\\&quot;&quot;</span>;\n            <span class=\"keyword\">if</span> (headers != <span class=\"literal\">null</span>)\n            &#123;\n                <span class=\"keyword\">foreach</span> (<span class=\"keyword\">var</span> header <span class=\"keyword\">in</span> headers)\n                &#123;\n                    arguments += <span class=\"string\">$&quot; -H \\&quot;<span class=\"subst\">&#123;header.Key&#125;</span>: <span class=\"subst\">&#123;header.Value&#125;</span>\\&quot;&quot;</span>;\n                &#125;\n            &#125;\n            <span class=\"keyword\">return</span> ExecuteCurlCommand(arguments);\n        &#125;\n\n\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> åŸ·è¡Œcurlå‘½ä»¤è¿”å›è¼¸å‡º</span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;param name=&quot;arguments&quot;&gt;</span><span class=\"doctag\">&lt;/param&gt;</span></span>\n        <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;returns&gt;</span><span class=\"doctag\">&lt;/returns&gt;</span></span>\n        <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"built_in\">string</span> <span class=\"title\">ExecuteCurlCommand</span>(<span class=\"params\"><span class=\"built_in\">string</span> arguments</span>)</span>\n        &#123;\n            <span class=\"keyword\">var</span> startInfo = <span class=\"keyword\">new</span> ProcessStartInfo\n            &#123;\n                FileName = CurlPath,\n                Arguments = arguments,\n                RedirectStandardOutput = <span class=\"literal\">true</span>,\n                UseShellExecute = <span class=\"literal\">false</span>,\n                CreateNoWindow = <span class=\"literal\">true</span>,\n            &#125;;\n            <span class=\"keyword\">using</span> (<span class=\"keyword\">var</span> p = Process.Start(startInfo))\n            &#123;\n                <span class=\"keyword\">using</span> (<span class=\"keyword\">var</span> reader = p.StandardOutput)\n                &#123;\n                    <span class=\"keyword\">return</span> reader.ReadToEnd();\n                &#125;\n            &#125;\n        &#125;\n    &#125;</code></pre>\n<h2 id=\"Usage\">Usage</h2>\n<pre><code class=\"highlight C#\"><span class=\"built_in\">string</span> url = <span class=\"string\">&quot;apiurl...&quot;</span>;\n<span class=\"keyword\">var</span> headers = <span class=\"keyword\">new</span> Dictionary&lt;<span class=\"built_in\">string</span>, <span class=\"built_in\">string</span>&gt;\n&#123;\n      &#123;<span class=\"string\">&quot;Authorization&quot;</span>, <span class=\"string\">&quot;Bearer your_api_key&quot;</span>&#125;\n&#125;;\n<span class=\"built_in\">string</span> response = CurlHelper.GetRequest(url, headers);\nConsole.WriteLine(<span class=\"string\">&quot;Get Response: &quot;</span> + response);</code></pre>\n","categories":["CSharp","Curl"],"tags":["CSharp","Curl"]},{"title":"Hello World","url":"/2024/11/19/hello-world/","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\">Quick Start</h2>\n<h3 id=\"Create-a-new-post\">Create a new post</h3>\n<pre><code class=\"highlight bash\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></code></pre>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\">Run server</h3>\n<pre><code class=\"highlight bash\">$ hexo server</code></pre>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\">Generate static files</h3>\n<pre><code class=\"highlight bash\">$ hexo generate</code></pre>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\">Deploy to remote sites</h3>\n<pre><code class=\"highlight bash\">$ hexo deploy</code></pre>\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n"},{"title":"C# è³‡æ–™å¿«å–","url":"/2024/11/20/imemorycahce/","content":"<h2 id=\"æ¦‚è¿°\">æ¦‚è¿°</h2>\n<p>æœ‰æ™‚å€™ä¸€äº›å¤§å‹è³‡æ–™ä¸”ç•°å‹•å°‘çš„è³‡æ–™<br>\næ¯æ¬¡ä½¿ç”¨å°±è¦å¾è³‡æ–™é‡æ–°æ’ˆå–å°±å¾ˆæµªè²»æ•ˆèƒ½è³‡æº<br>\né€™å€‹æ™‚å€™å°±æ˜¯å¿«å–å‡ºå ´çš„æ™‚å€™</p>\n<h2 id=\"Install\">Install</h2>\n<pre><code class=\"highlight powershell\">dotnet add package Microsoft.Extensions.Caching.Memory</code></pre>\n<h2 id=\"Extensions-cs\">Extensions.cs</h2>\n<pre><code class=\"highlight C#\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">AddExtension</span>(<span class=\"params\"><span class=\"keyword\">this</span> IServiceCollection services</span>)</span>\n&#123;\n    services.AddMemoryCache();\n    <span class=\"comment\">// services.AddScoped&lt;CacheHelper&gt;(); //å¦‚æœæœ‰ä½¿ç”¨æ•´åˆå·¥å…·é¡</span>\n&#125;</code></pre>\n<h2 id=\"Usage\">Usage</h2>\n<pre><code class=\"highlight C#\">[<span class=\"meta\">Route(<span class=\"string\">&quot;api/[controller]&quot;</span>)</span>]\n [<span class=\"meta\">ApiController</span>]\n <span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">DataController</span> : <span class=\"title\">ControllerBase</span>\n &#123;\n     <span class=\"keyword\">private</span> <span class=\"keyword\">readonly</span> DataBaseService dataBaseService;\n     <span class=\"keyword\">private</span> <span class=\"keyword\">readonly</span> IMemoryCache memoryCache;\n\n     <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">DataController</span>(<span class=\"params\">DataBaseService dataBaseService, IMemoryCache memoryCache</span>)</span>\n     &#123;\n         <span class=\"keyword\">this</span>.memoryCache = memoryCache;\n         <span class=\"keyword\">this</span>.dataBaseService = dataBaseService;\n     &#125;\n\n     [<span class=\"meta\">HttpGet(<span class=\"string\">&quot;/search&quot;</span>)</span>]\n     <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">async</span> Task&lt;IActionResult&gt; <span class=\"title\">Search</span>(<span class=\"params\"><span class=\"built_in\">string</span> keyword</span>)</span>\n     &#123;\n        <span class=\"comment\">// å¾è¨˜æ†¶é«”å¿«å–æŸ¥çœ‹æ˜¯å¦å­˜åœ¨ï¼Œæ²’å†å»è³‡æ–™åº«æ’ˆè³‡æ–™ä¸¦å„²å­˜å¿«å–</span>\n         <span class=\"keyword\">if</span> (memoryCache.TryGetValue(<span class=\"string\">&quot;MainDataCache&quot;</span>, <span class=\"keyword\">out</span> List&lt;Prs006&gt; dataList))\n         &#123;\n             <span class=\"keyword\">var</span> result = dataList?\n                 .Where(data =&gt; data.Ordnme?.Contains(keyword, StringComparison.OrdinalIgnoreCase) == <span class=\"literal\">true</span>\n                                || data.Scitn?.Contains(keyword, StringComparison.OrdinalIgnoreCase) == <span class=\"literal\">true</span>\n                                || data.Keyword?.Contains(keyword, StringComparison.OrdinalIgnoreCase) == <span class=\"literal\">true</span>)\n                 .ToList() ?? <span class=\"keyword\">new</span> List&lt;Prs006&gt;();\n\n             <span class=\"keyword\">return</span> Ok(result);\n         &#125;\n         <span class=\"keyword\">else</span>\n         &#123;\n             <span class=\"keyword\">var</span> dbData = <span class=\"keyword\">await</span> dataBaseService.GetDatas();\n             <span class=\"comment\">//å¯«å…¥è¨˜æ†¶é«”å„²å­˜ï¼Œä¸€å¤©å¾Œè‡ªå‹•éæœŸ</span>\n             memoryCache.Set(<span class=\"string\">&quot;MainDataCache&quot;</span>, dbData, TimeSpan.FromDays(<span class=\"number\">1</span>));\n\n             <span class=\"keyword\">var</span> result = dbData?\n                 .Where(data =&gt; data.Ordnme?.Contains(keyword, StringComparison.OrdinalIgnoreCase) == <span class=\"literal\">true</span>\n                                || data.Scitn?.Contains(keyword, StringComparison.OrdinalIgnoreCase) == <span class=\"literal\">true</span>\n                                || data.Keyword?.Contains(keyword, StringComparison.OrdinalIgnoreCase) == <span class=\"literal\">true</span>)\n                 .ToList() ?? <span class=\"keyword\">new</span> List&lt;Prs006&gt;();\n\n             <span class=\"keyword\">return</span> Ok(result);\n         &#125;\n     &#125;</code></pre>\n<h2 id=\"CacheHelper-cs-Optional\">CacheHelper.cs(Optional)</h2>\n<pre><code class=\"highlight C#\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">CacheHelper</span>\n&#123;\n    <span class=\"keyword\">private</span> <span class=\"keyword\">readonly</span> IMemoryCache cache;\n\n    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CacheHelper</span>(<span class=\"params\">IMemoryCache cache</span>)</span>\n    &#123;\n        <span class=\"keyword\">this</span>.cache = cache;\n    &#125;\n\n    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Set</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\"><span class=\"built_in\">string</span> key, T <span class=\"keyword\">value</span>, <span class=\"built_in\">int</span> expire = <span class=\"number\">300</span></span>)</span>\n    &#123;\n        <span class=\"keyword\">var</span> options = <span class=\"keyword\">new</span> MemoryCacheEntryOptions\n        &#123;\n            AbsoluteExpirationRelativeToNow = TimeSpan.FromSeconds(expire),\n        &#125;;\n        cache.Set(key, <span class=\"keyword\">value</span>, options);\n    &#125;\n\n    <span class=\"keyword\">public</span> T? Get&lt;T&gt;(<span class=\"built_in\">string</span> key)\n    &#123;\n        cache.TryGetValue&lt;T&gt;(key, <span class=\"keyword\">out</span> <span class=\"keyword\">var</span> <span class=\"keyword\">value</span>);\n        <span class=\"keyword\">return</span> <span class=\"keyword\">value</span>;\n    &#125;\n\n    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Remove</span>(<span class=\"params\"><span class=\"built_in\">string</span> key</span>)</span>\n    &#123;\n        cache.Remove(key);\n    &#125;\n\n    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Update</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\"><span class=\"built_in\">string</span> key, T <span class=\"keyword\">value</span>, <span class=\"built_in\">int</span> expire</span>)</span>\n    &#123;\n        cache.Remove(key);\n        Set&lt;T&gt;(key, <span class=\"keyword\">value</span>, expire);\n    &#125;\n\n    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"built_in\">bool</span> <span class=\"title\">Contains</span>(<span class=\"params\"><span class=\"built_in\">string</span> key</span>)</span>\n    &#123;\n        <span class=\"keyword\">return</span> cache.TryGetValue(key, <span class=\"keyword\">out</span> _);\n    &#125;\n&#125;</code></pre>\n","categories":["CSharp"],"tags":["CSharp","Cache"]},{"title":"C# Web apiä½¿ç”¨Quartzé€²è¡Œä¸€æ¬¡æ€§æ’ç¨‹","url":"/2024/11/19/quartz/","content":"<h2 id=\"Install\">Install</h2>\n<pre><code class=\"highlight powershell\"><span class=\"built_in\">Install-Package</span> Quartz.AspNetCore\n<span class=\"built_in\">Install-Package</span> Quartz.Extensions.DependencyInjection\n<span class=\"built_in\">Install-Package</span> Quartz.Serialization.Json</code></pre>\n<h2 id=\"appsetting-json\">appsetting.json</h2>\n<p>é€™é‚Šä½¿ç”¨ Oracle è³‡æ–™åº«åšç‚ºæŒä¹…åŒ–å„²å­˜<a href=\"https://github.com/quartznet/quartznet/tree/main/database/tables\">å„é¡è³‡æ–™åº«è…³æœ¬</a></p>\n<pre><code class=\"highlight json\"><span class=\"attr\">&quot;Quartz&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span>\n  <span class=\"attr\">&quot;quartz.scheduler.instanceName&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;QuartzOracleScheduler&quot;</span><span class=\"punctuation\">,</span>\n  <span class=\"attr\">&quot;quartz.scheduler.instanceId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;AUTO&quot;</span><span class=\"punctuation\">,</span>\n  <span class=\"attr\">&quot;quartz.jobStore.type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Quartz.Impl.AdoJobStore.JobStoreTX, Quartz&quot;</span><span class=\"punctuation\">,</span>\n  <span class=\"attr\">&quot;quartz.jobStore.useProperties&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;true&quot;</span><span class=\"punctuation\">,</span>\n  <span class=\"attr\">&quot;quartz.jobStore.dataSource&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;default&quot;</span><span class=\"punctuation\">,</span>\n  <span class=\"attr\">&quot;quartz.jobStore.tablePrefix&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;QRTZ_&quot;</span><span class=\"punctuation\">,</span>\n  <span class=\"attr\">&quot;quartz.jobStore.driverDelegateType&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Quartz.Impl.AdoJobStore.OracleDelegate, Quartz&quot;</span><span class=\"punctuation\">,</span>\n  <span class=\"attr\">&quot;quartz.dataSource.default.provider&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;OracleODPManaged&quot;</span><span class=\"punctuation\">,</span>\n  <span class=\"attr\">&quot;quartz.dataSource.default.connectionString&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Your Connection String&quot;</span>\n<span class=\"punctuation\">&#125;</span></code></pre>\n<h2 id=\"Job-cs\">Job.cs</h2>\n<pre><code class=\"highlight C#\"> <span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">SendTasJob</span> : <span class=\"title\">IJob</span>\n &#123;\n     <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">async</span> Task <span class=\"title\">Execute</span>(<span class=\"params\">IJobExecutionContext context</span>)</span>\n     &#123;\n         <span class=\"comment\">//Jobè¦å¯¦ä½œçš„å…§å®¹</span>\n          <span class=\"keyword\">var</span> tasid = context.MergedJobDataMap.GetString(<span class=\"string\">&quot;tasid&quot;</span>);\n          <span class=\"keyword\">var</span> welcomeText = context.MergedJobDataMap.GetString(<span class=\"string\">&quot;welcomeText&quot;</span>);\n          Console.WriteLine(tasid + welcomeText);\n          <span class=\"keyword\">return</span> Task.CompletedTask;\n     &#125;\n&#125;</code></pre>\n<h2 id=\"Controller-cs\">Controller.cs</h2>\n<pre><code class=\"highlight C#\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">TasController</span> : <span class=\"title\">ControllerBase</span>\n&#123;\n\n    <span class=\"keyword\">private</span> <span class=\"keyword\">readonly</span> ISchedulerFactory schedulerFactory;\n    <span class=\"keyword\">private</span> <span class=\"keyword\">readonly</span> IdGenerator idGenerator;\n\n    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">TasController</span>(<span class=\"params\">ISchedulerFactory schedulerFactory,</span></span>\n<span class=\"params\"><span class=\"function\">                         IdGenerator idGenerator</span>)</span>\n    &#123;\n        <span class=\"keyword\">this</span>.schedulerFactory = schedulerFactory;\n        <span class=\"keyword\">this</span>.idGenerator = idGenerator;\n    &#125;\n\n    [<span class=\"meta\">HttpPost(<span class=\"string\">&quot;[action]&quot;</span>)</span>]\n    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">async</span> Task&lt;IActionResult&gt; <span class=\"title\">ScheduleTasJob</span>(<span class=\"params\">TasJobRequest request</span>)</span>\n    &#123;\n        <span class=\"comment\">// ä½¿ç”¨ SchedulerFactory å–å¾— Scheduler</span>\n        <span class=\"keyword\">var</span> sch = <span class=\"keyword\">await</span> schedulerFactory.GetScheduler();\n       <span class=\"comment\">// é›ªèŠ±ç®—æ³•ç”¢Id</span>\n        <span class=\"keyword\">var</span> jobid = idGenerator.CreateId();\n        <span class=\"keyword\">var</span> jobKey = <span class=\"keyword\">new</span> JobKey(<span class=\"string\">$&quot;TasJob-<span class=\"subst\">&#123;jobid&#125;</span>&quot;</span>, <span class=\"string\">&quot;TasJobs&quot;</span>);\n        <span class=\"keyword\">var</span> triggerKey = <span class=\"keyword\">new</span> TriggerKey(<span class=\"string\">$&quot;TasJobTrigger-<span class=\"subst\">&#123;jobid&#125;</span>&quot;</span>, <span class=\"string\">&quot;TasJobs&quot;</span>);\n\n        <span class=\"comment\">// å»ºç«‹Job</span>\n        <span class=\"keyword\">var</span> job = JobBuilder.Create&lt;SendTasJob&gt;()\n            .WithIdentity(jobKey)\n             <span class=\"comment\">//key value å¦‚æœæœ‰é–‹å•ŸUseProperties åªèƒ½æœ‰stringå‹åˆ¥</span>\n            .UsingJobData(<span class=\"string\">&quot;tasid&quot;</span>, request.TasId)\n            .UsingJobData(<span class=\"string\">&quot;welcomeText&quot;</span>, request.WelcomeText)\n            .StoreDurably() <span class=\"comment\">// ä½¿ä»»å‹™æŒä¹…åŒ–</span>\n            .Build();\n\n        <span class=\"comment\">// è¨­å®šTrigger</span>\n        ITrigger trigger = TriggerBuilder.Create()\n            .WithIdentity(triggerKey)\n            .StartAt(request.ExecuteAt ?? DateTime.UtcNow) <span class=\"comment\">// æŒ‡å®šåŸ·è¡Œæ™‚é–“</span>\n            .WithSimpleSchedule(x =&gt; x\n                .WithMisfireHandlingInstructionFireNow() <span class=\"comment\">// ç•¶æ’ç¨‹éŒ¯éåŸ·è¡Œæ™‚é–“æ™‚ç«‹å³åŸ·è¡Œ</span>\n                .WithRepeatCount(<span class=\"number\">0</span>) <span class=\"comment\">//åªåŸ·è¡Œä¸€æ¬¡</span>\n                )\n            .Build();\n\n        <span class=\"keyword\">try</span>\n        &#123;\n           <span class=\"keyword\">await</span> sch.ScheduleJob(job, trigger);\n           Console.WriteLine(<span class=\"string\">$&quot;Scheduled job successfully with JobKey: <span class=\"subst\">&#123;jobKey.Name&#125;</span> and TriggerKey: <span class=\"subst\">&#123;triggerKey.Name&#125;</span>&quot;</span>);\n        &#125;\n        <span class=\"keyword\">catch</span> (Exception ex)\n        &#123;\n            Console.WriteLine(<span class=\"string\">$&quot;Failed to schedule job with JobKey: <span class=\"subst\">&#123;jobKey.Name&#125;</span> and TriggerKey: <span class=\"subst\">&#123;triggerKey.Name&#125;</span>&quot;</span>, ex);\n            <span class=\"keyword\">return</span> StatusCode(<span class=\"number\">500</span>, <span class=\"string\">&quot;Failed to schedule job&quot;</span>);\n        &#125;\n\n        <span class=\"keyword\">return</span> Ok(<span class=\"string\">$&quot;Scheduled job successfully with Job: <span class=\"subst\">&#123;jobKey.Name&#125;</span> and Trigger: <span class=\"subst\">&#123;triggerKey.Name&#125;</span>&quot;</span>);\n    &#125;\n&#125;</code></pre>\n<h2 id=\"Program-cs\">Program.cs</h2>\n<pre><code class=\"highlight C#\"><span class=\"comment\">// å¾ appsettings.json è¼‰å…¥ Quartz é…ç½®</span>\nbuilder.Services.Configure&lt;QuartzOptions&gt;(builder.Configuration.GetSection(<span class=\"string\">&quot;Quartz&quot;</span>));\n\n<span class=\"comment\">// åŠ å…¥ Quartz æœå‹™</span>\nbuilder.Services.AddQuartz(q =&gt;\n&#123;\n    q.UseJobFactory&lt;MicrosoftDependencyInjectionJobFactory&gt;();\n\n    <span class=\"comment\">// æŒä¹…åŒ–</span>\n    q.UsePersistentStore(opt =&gt;\n    &#123;\n        opt.UseProperties = <span class=\"literal\">false</span>;\n        opt.UseOracle(configuration =&gt;\n        &#123;\n            configuration.ConnectionString = builder.Configuration[<span class=\"string\">&quot;Quartz:quartz.dataSource.default.connectionString&quot;</span>];\n        &#125;);\n        opt.UseNewtonsoftJsonSerializer();\n    &#125;);\n&#125;);\nbuilder.Services.AddQuartzServer(q =&gt; q.WaitForJobsToComplete = <span class=\"literal\">true</span>); <span class=\"comment\">//hosting server</span>\n<span class=\"comment\">//builder.Services.AddQuartzHostedService(options =&gt;</span>\n<span class=\"comment\">//&#123;</span>\n<span class=\"comment\">//    // when shutting down we want jobs to complete gracefully</span>\n<span class=\"comment\">//    options.WaitForJobsToComplete = true;</span>\n<span class=\"comment\">//&#125;);</span>\nbuilder.Services.AddTransient&lt;SendTasJob&gt;(); <span class=\"comment\">// Jobè¨»å†Š</span>\n</code></pre>\n<h2 id=\"AddQuartzServer-vs-AddQuartzHostedService\">AddQuartzServer vs AddQuartzHostedService</h2>\n<p>AddQuartzServer æœƒå¤šä¸€å€‹ Health Check æª¢æŸ¥ scheduler<br>\nSource Code å¦‚ä¸‹</p>\n<pre><code class=\"highlight C#\"><span class=\"keyword\">using</span> System;\n\n<span class=\"keyword\">using</span> Microsoft.Extensions.DependencyInjection;\n\n<span class=\"meta\">#<span class=\"keyword\">if</span> SUPPORTS_HEALTH_CHECKS</span>\n<span class=\"keyword\">using</span> Quartz.AspNetCore.HealthChecks;\n<span class=\"meta\">#<span class=\"keyword\">endif</span></span>\n\n<span class=\"keyword\">namespace</span> <span class=\"title\">Quartz</span>\n&#123;\n    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title\">QuartzServiceCollectionExtensions</span>\n    &#123;\n        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> IServiceCollection <span class=\"title\">AddQuartzServer</span>(<span class=\"params\"></span></span>\n<span class=\"params\"><span class=\"function\">            <span class=\"keyword\">this</span> IServiceCollection services,</span></span>\n<span class=\"params\"><span class=\"function\">            Action&lt;QuartzHostedServiceOptions&gt;? configure = <span class=\"literal\">null</span></span>)</span>\n        &#123;\n            <span class=\"meta\">#<span class=\"keyword\">if</span> SUPPORTS_HEALTH_CHECKS</span>\n            services\n                .AddHealthChecks()\n                .AddTypeActivatedCheck&lt;QuartzHealthCheck&gt;(<span class=\"string\">&quot;quartz-scheduler&quot;</span>);\n            <span class=\"meta\">#<span class=\"keyword\">endif</span></span>\n\n            <span class=\"keyword\">return</span> services.AddQuartzHostedService(configure);\n        &#125;\n    &#125;\n&#125;</code></pre>\n<h2 id=\"IIS-å›æ”¶æ©Ÿåˆ¶ï¼Œæ’ç¨‹å¤±æ•ˆ\">IIS å›æ”¶æ©Ÿåˆ¶ï¼Œæ’ç¨‹å¤±æ•ˆ</h2>\n<ul>\n<li>é—œé–‰å›æ”¶æ©Ÿåˆ¶(ç¨‹å¼æ‡‰ç”¨é›†å€ =&gt; é€²éšè¨­å®š)<br>\n<img src=\"/images/InetMgr_ndjANFedAK.png\" alt=\"InetMgr_ndjANFedAK.png\"><br>\n<img src=\"/images/InetMgr_8EXFtPapjN.png\" alt=\"InetMgr_8EXFtPapjN.png\"></li>\n<li>å®šæœŸå‘¼å« api ç¶­æŒ server keep alive (ex.ä½¿ç”¨ window æ’ç¨‹)</li>\n</ul>\n<pre><code class=\"highlight powershell\"><span class=\"comment\"># File: InvokeApi.ps1</span>\n\n<span class=\"comment\"># è¨­å®š URL</span>\n<span class=\"variable\">$url</span> = <span class=\"string\">&quot;your api url&quot;</span>\n<span class=\"comment\"># è¨­å®š Log Path</span>\n<span class=\"variable\">$logFile</span> = <span class=\"string\">&quot;C:\\Scripts\\InvokeApi.log&quot;</span>\n\n<span class=\"comment\"># èª¿ç”¨ API</span>\n<span class=\"keyword\">try</span> &#123;\n    <span class=\"variable\">$response</span> = <span class=\"built_in\">Invoke-WebRequest</span> <span class=\"literal\">-Uri</span> <span class=\"variable\">$url</span> <span class=\"literal\">-Method</span> Get <span class=\"literal\">-TimeoutSec</span> <span class=\"number\">10</span>\n    <span class=\"variable\">$logEntry</span> = <span class=\"string\">&quot;<span class=\"variable\">$</span>(Get-Date) - API call successfully: <span class=\"variable\">$</span>(<span class=\"variable\">$response</span>.StatusCode)&quot;</span>\n&#125; <span class=\"keyword\">catch</span> &#123;\n    <span class=\"variable\">$logEntry</span> = <span class=\"string\">&quot;<span class=\"variable\">$</span>(Get-Date) - API call failed: <span class=\"variable\">$</span>(<span class=\"variable\">$_</span>.Exception.Message)&quot;</span>\n&#125;\n\n<span class=\"comment\"># å¯«å…¥æ—¥èªŒ</span>\n<span class=\"variable\">$logEntry</span> | <span class=\"built_in\">Out-File</span> <span class=\"literal\">-FilePath</span> <span class=\"variable\">$logFile</span> <span class=\"literal\">-Append</span>\n</code></pre>\n<ul>\n<li>å›æ”¶å¾Œï¼Œæ‡‰ç”¨é—œé–‰äº‹ä»¶æ·»åŠ æ‡‰ç”¨é‡å•Ÿ<br>\n<img src=\"/images/aplstart.png\" alt=\"aplstart.png\"></li>\n</ul>\n<h2 id=\"åƒè€ƒè³‡æ–™\">åƒè€ƒè³‡æ–™</h2>\n<p><a href=\"https://www.quartz-scheduler.net/\">https://www.quartz-scheduler.net/</a><br>\n<a href=\"https://stackoverflow.com/questions/75443765/quartz-aspnetcore-and-hosting-in-asp-net-core\">https://stackoverflow.com/questions/75443765/quartz-aspnetcore-and-hosting-in-asp-net-core</a><br>\n<a href=\"https://blog.csdn.net/qq_18932003/article/details/139672249\">https://blog.csdn.net/qq_18932003/article/details/139672249</a></p>\n","categories":["CSharp"],"tags":["CSharp","Quartz"]},{"title":"C# ä½¿ç”¨IdGenç”¢ç”ŸId(é›ªèŠ±ç®—æ³•)","url":"/2024/11/19/snowflake/","content":"<h1>é›ªèŠ±ç®—æ³•</h1>\n<h2 id=\"æ¦‚è¿°\">æ¦‚è¿°</h2>\n<p>å…¬å¸çš„è³‡æ–™è¡¨å¸¸å¸¸ä½¿ç”¨å¾ˆå¥‡æ€ªçš„æ¬„ä½ä¾†å»ç•¶è­˜åˆ¥éµ(ä¾‹å¦‚æ™‚é–“æˆ³)ï¼Œæ—¢ç„¶éƒ½ç”¨æ™‚é–“æˆ³äº†ä¸å¦‚ç”¨é›ªèŠ±ç®—æ³•ç”¢ ID ç•¶ PK<br>\né›ªèŠ±ç®—æ³•æ˜¯ Twitter é–‹æºçš„ç”Ÿæˆåˆ†æ•£å¼å…¨åŸŸç”¢ç”Ÿ ID çš„æ¼”ç®—æ³•</p>\n<h2 id=\"æ ¼å¼\">æ ¼å¼</h2>\n<p>é›ªèŠ± ID æœ‰ 64 ä½å…ƒ</p>\n<ul>\n<li>1 ä½ç‚ºç¬¦è™Ÿä½å§‹çµ‚æ˜¯ 0</li>\n<li>41 ä½ç‚ºæ™‚é–“æˆ³ï¼Œç²¾åº¦æ¯«ç§’</li>\n<li>10 ä½å¯ç‚º(10 ä½æ©Ÿå™¨ ID) æˆ– (5 ä½æ•¸æ“šä¸­å¿ƒ ID + 5 ä½æ©Ÿå™¨ ID)ï¼Œå¯è­˜åˆ¥ 1024 å°æ©Ÿå™¨</li>\n<li>12 ä½ç‚ºåºåˆ—è™Ÿ =&gt; ä»£è¡¨æ¯æ¯«ç§’å¯ä»¥æœ‰ 4096 å€‹ ID</li>\n</ul>\n<p><img src=\"/images/snowflake.png\" alt=\"snowflake_structure.image\"></p>\n<h2 id=\"å„ªç¼ºé»\">å„ªç¼ºé»</h2>\n<h3 id=\"å„ªé»\">å„ªé»</h3>\n<ol>\n<li>ID åŒ…å«æ™‚é–“æˆ³ï¼Œæœ‰åºå¯æ’åº</li>\n<li>ç°¡å–®é€Ÿåº¦å¿«</li>\n</ol>\n<h3 id=\"ç¼ºé»\">ç¼ºé»</h3>\n<ol>\n<li>ä¾è³´ç³»çµ±æ™‚é–“ï¼Œå¦‚æœç³»çµ±æ™‚é–“å›é€€æˆ–è·³èºï¼Œæœƒç”¢ç”Ÿä¸å”¯ä¸€ ID</li>\n<li>è‡ªå·±æ‰‹å‹•åˆ†é…æ©Ÿå™¨ IDï¼Œåˆ†é…ä¸ç•¶ï¼Œç”¢ç”Ÿä¸å”¯ä¸€ ID</li>\n</ol>\n<h2 id=\"Install\">Install</h2>\n<pre><code class=\"highlight ada\">dotnet add <span class=\"keyword\">package</span> <span class=\"title\">IdGen</span></code></pre>\n<h2 id=\"DI-æ³¨å…¥-Optionl\">DI æ³¨å…¥(Optionl)</h2>\n<pre><code class=\"highlight ada\">dotnet add <span class=\"keyword\">package</span> <span class=\"title\">IdGen.DependencyInjection</span></code></pre>\n<h2 id=\"Usage\">Usage</h2>\n<h3 id=\"ä¸€èˆ¬\">ä¸€èˆ¬</h3>\n<pre><code class=\"highlight C#\"><span class=\"keyword\">var</span> generator = <span class=\"keyword\">new</span> IdGenerator(<span class=\"number\">0</span>);\n<span class=\"keyword\">var</span> id = generator.CreateId();</code></pre>\n<h3 id=\"ä¾è³´æ³¨å…¥\">ä¾è³´æ³¨å…¥</h3>\n<p>Program.cs</p>\n<pre><code class=\"highlight C#\">builder.Services.AddIdGen(<span class=\"number\">0</span>);</code></pre>\n<p>Example.cs</p>\n<pre><code class=\"highlight C#\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Example</span>\n&#123;\n    <span class=\"comment\">//private readonly IIdGenerator&lt;long&gt; idGenerator;</span>\n    <span class=\"comment\">//public Example (IIdGenerator&lt;long&gt; idGenerator)</span>\n    <span class=\"comment\">//&#123;</span>\n    <span class=\"comment\">//    this.idGenerator = idGenerator;</span>\n    <span class=\"comment\">//&#125;</span>\n\n    <span class=\"keyword\">private</span> <span class=\"keyword\">readonly</span> IdGenerator idGenerator;\n    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Example</span>(<span class=\"params\">IdGenerator idGenerator</span>)</span>\n    &#123;\n        <span class=\"keyword\">this</span>.idGenerator = idGenerator;\n    &#125;\n\n    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"built_in\">long</span> <span class=\"title\">GetId</span>()</span>\n    &#123;\n        <span class=\"keyword\">var</span> id = idGenerator.CreateId();\n        <span class=\"keyword\">return</span> id;\n    &#125;\n&#125;</code></pre>\n<h2 id=\"åƒè€ƒè³‡æ–™\">åƒè€ƒè³‡æ–™</h2>\n<p><a href=\"https://github.com/RobThree/IdGen?tab=readme-ov-file\">https://github.com/RobThree/IdGen?tab=readme-ov-file</a></p>\n","categories":["CSharp"],"tags":["CSharp","æ¼”ç®—æ³•"]},{"title":"C# ä½¿ç”¨Winscpä¸Šå‚³æª”æ¡ˆ","url":"/2024/11/19/winscp/","content":"<h2 id=\"æ¦‚è¿°\">æ¦‚è¿°</h2>\n<p>æ¥æ‰‹äº†å‰è¼©çš„å°ˆæ¡ˆï¼Œä»¥å‰éƒ½è¦è‡ªå·±æ‰‹å‹•ä¸Šå‚³æª”æ¡ˆï¼Œå¥½éº»ç…©<br>\nå› æ­¤ä¾†çœ‹çœ‹æ€éº¼ç”¨ Winscp å¥—ä»¶ä¾†ä¸²æ¥ï¼Œé…åˆå¾ŒçºŒè£½ä½œæˆæ’ç¨‹ç¨‹å¼ï¼Œè‡ªå‹•ä¸Šå‚³</p>\n<h2 id=\"Install\">Install</h2>\n<pre><code class=\"highlight powershell\">dotnet add package WinSCP</code></pre>\n<h2 id=\"Example\">Example</h2>\n<pre><code class=\"highlight C#\"><span class=\"comment\">// é€£ç·šè¨­å®š</span>\nSessionOptions sessionOptions = <span class=\"keyword\">new</span> SessionOptions\n&#123;\n    Protocol = Protocol.Sftp,\n    HostName = <span class=\"string\">&quot;hostname&quot;</span>,\n    PortNumber = port,\n    UserName = <span class=\"string\">&quot;xxxx&quot;</span>,\n    SshHostKeyFingerprint = <span class=\"string\">&quot;ssh-rsa 2048 xxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;</span>,\n    SshPrivateKeyPath = <span class=\"string\">&quot;....&quot;</span> <span class=\"comment\">// ç§é‘°è·¯å¾‘è‡ªè¡Œèª¿æ•´(é¸ç”¨)</span>\n&#125;;\n\n<span class=\"comment\">// é–‹å•Ÿæœƒè©±</span>\n<span class=\"keyword\">using</span> <span class=\"keyword\">var</span> session = <span class=\"keyword\">new</span> Session();\nsession.Open(sessionOptions);\n\n<span class=\"comment\">// å®šç¾©ä¸Šå‚³çš„æ–‡ä»¶è·¯å¾‘å’Œé ç«¯ç›®éŒ„</span>\n<span class=\"built_in\">string</span> localFilePath = <span class=\"string\">&quot;æ–‡ä»¶è·¯å¾‘&quot;</span>;\n<span class=\"built_in\">string</span> remoteDirectory = <span class=\"string\">&quot;ä¼ºæœå™¨ç›®éŒ„&quot;</span>; <span class=\"comment\">// é ç«¯ä¼ºæœå™¨çš„ç›®éŒ„</span>\n\n<span class=\"comment\">// ä¸Šå‚³æ–‡ä»¶</span>\nTransferOperationResult transferResult;\ntransferResult = <span class=\"keyword\">this</span>.session.PutFiles(localFilePath, remoteDirectory);\n\n<span class=\"comment\">// æª¢æŸ¥ä¸Šå‚³æ˜¯å¦æˆåŠŸ</span>\ntransferResult.Check();</code></pre>\n<h2 id=\"åƒè€ƒè³‡æ–™\">åƒè€ƒè³‡æ–™</h2>\n<p><a href=\"https://winscp.net/eng/docs/library#csharp\">https://winscp.net/eng/docs/library#csharp</a></p>\n","categories":["CSharp"],"tags":["CSharp","Winscp"]},{"title":"categories","url":"/categories/index.html","content":""},{"title":"æ¨™ç±¤","url":"/tags/index.html","content":""}]